<!DOCTYPE html>
<html>

<head>
<link rel=stylesheet href=style.css />
<link rel=icon href=CZI-new-logo.png />
</head>

<body>
    <nav role="navigation">
        <!-- 
        Navigation as updated 8/15/2019.
        To make any changes, here, update Navigation.html,
        then rerun UpdateNavigation.py from the docs directory.
        This will copy to all the html files.
        Do not manually edit the navigation section of any other file.
        -->
        <ul>
            <a class="main-nav" href=index.html><li >Shasta</li></a>
                <a href=QuickStart.html><li>Quick Start</li></a>
                
                <li aria-haspopup="true"> How to
                <ul class="dropdown" aria-label="submenu">
                <a href=Running.html><li>Run an assembly</li></a>
                <a href=Docker.html><li>Run an assembly in Docker</li></a>
                <a href=Performance.html><li>Maximize assembly performance</li></a>
                <a href=BuildingFromSource.html><li>Build the code from source</li></a>
                <a href=InspectingResults.html><li>Explore assembly results</li></a>
                <a href=Contributing.html><li>Contribute to Shasta</li></a>
                <a href=ReportingBugs.html><li>Report problems or ask questions</li></a>
                </ul>
            </li>
            <li aria-haspopup="true"> About
                    <ul class="dropdown" aria-label="submenu">
                            <a href=Motivation.html><li>Motivation</li></a>
                            <a href=CurrentStatus.html><li>Current status</li></a>
                            <a href=SupportedPlatforms.html><li>Supported platforms</li></a>
                            <a href=Acknowledgments.html><li>Acknowledgments</li></a>
                            <a href=ComputationalMethods.html><li>Computational methods</li></a>
                            <a href=CommandLineOptions.html><li>Command line options</li></a>
                            <a href=Compatibility.html><li>Compatibility across releases</li></a>
                            <a href=gpu.html><li>GPU acceleration</li></a>
    
                    </ul>
                </li>
    
        </ul>
    </nav>
    <main>
<h1>Maximizing assembly performance</h1>

<p>
Use the following tips to obtain the best performance
from the Shasta assembler.

<ul>

<li>
If you are using the Shasta executable (the simplest and recommended option), 
use the following options to allocate memory
on 2MB huge pages mapped to the <code>hugetlbfs</code> filesystem.
However, this requires root privilege to be obtained via <code>sudo</code>.
Depending on your <code>sudo</code> set up, this may ask for your password,
or fail.
<pre>--memoryMode filesystem --memoryBacking 2M</pre>

<li>
Don't use macOS or Windows. Use a 64-bit Linux system instead. 
The Shasta executable runs on most current 64-bit Linux distributions
and requires no set up or installation.

<li>
Do not use a release build downloaded from the 
<a href='https://github.com/chanzuckerberg/shasta/releases'>Releases</a> page on GitHub.
Instead build Shasta from source as 
described <a href=BuildingFromSource.html>here</a>,
using for the build the same machine where it will run.
This will limit you to Ubuntu 16.04 or Ubuntu 18.04.
The reason for this is that, 
except for release builds, Shasta code is compiled using
gcc option <code>-march=native</code>, which instructs
the compiler to use the entire instruction 
set available on the machine that does the compilation.
This generally results in better performance on that machine. 
However,
the build may fail with an <code>Illegal instruction</code>
signal if transported to a different machine with a
less powerful instruction set. 
To disable the <code>-march=native</code> option
and build portable but less performing code,
specify <code>-DBUILD_NATIVE=OFF</code> when running <code>cmake</code>
(release builds do this).
See <a href=BuildingFromSource.html>here</a>
for more information on how to build from source.



</ul>
</main>
</body>
</html>

