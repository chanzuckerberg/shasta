<!DOCTYPE html>
<html>

<head>
<link rel=stylesheet href=style.css />
<link rel=icon href=CZI-new-logo.png />
</head>

<body>
    <nav role="navigation">
        <div class="nav-container">
        <ul>
                <li class="main-nav"><a href=index.html>Shasta</a></li>
                <li><a href=QuickStart.html>Quick start</a></li>
                
                <li aria-haspopup="true"> How to
                <ul class="dropdown" aria-label="submenu">
                <li><a href=Running.html>Run an assembly</a>
                <li><a href=Performance.html>Maximize assembly performance</a>
                <li><a href=BuildingFromSource.html>Build the code from source</a>
                <li><a href=InspectingResults.html>Inspect or debug assembly results
                <li><a href=Contributing.html>Contribute to Shasta</a>
                <li><a href=ReportingBugs.html>Report problems or ask questions</a>
                </ul>
            </li>
            <li aria-haspopup="true"> About
                    <ul class="dropdown" aria-label="submenu">
                            <li><a href=Motivation.html>Motivation</a></li>
                            <li><a href=CurrentStatus.html>Current status</a></li>
                            <li><a href=SupportedPlatforms.html>Supported platforms</a></li>
                            <li><a href=Acknowledgments.html>Acknowledgments</a></li>
                            <li><a href=ComputationalMethods.html>Computational methods</a></li>
                            <li><a href=Compatibility.html>Compatibility across releases</a></li>
    
                    </ul>
                </li>
    
        </ul>
        </div>
    </nav>
    <main>
<h1>Maximizing assembly performance</h1>

<p>
Use the following tips to obtain the best performance
from the Shasta assembler.

<ul>

<li>
If you are using the Shasta executable (the simplest and recommended option), 
use the following options to allocate memory
on 2MB huge pages mapped to the <code>hugetlbfs</code> filesystem.
However, this requires root privilege to be obtained via <code>sudo</code>.
Depending on your <code>sudo</code> set up, this may ask for your password,
or fail.
<pre>--memoryMode filesystem --memoryBacking 2M</pre>

<li>
Don't use macOS or Windows. Use a 64-bit Linux system instead. 
The Shasta executable runs on most current 64-bit Linux distributions.

<li>
<b>Do not use a release build</b>. 
Use Shasta code built on the same machine where it will run
(this will limit you to Ubuntu 16.04 or Ubuntu 18.04).
Except for release builds, Shasta code is compiled using
gcc option <code>-march=native</code>, which instructs
the compiler to use the entire instruction 
set available on the machine that does the compilation.
This generally results in better performance. However,
the build may fail with an <code>Illegal instruction</code>
signal if transported to a different machine with a
less powerful instruction set. 
To disable the <code>-march=native</code> option
and build portable but less performing code,
specify <code>-DBUILD_NATIVE=OFF</code> when running <code>cmake</code>
(release builds do this).
See <a href=BuildingFromSource.html>here</a>
for more information on how to build from source.


<li>
If you are using <code>SmallRun.py</code>, switch to <code>Run.py</code> instead.
The latter, however, requires root privilege to be acquired via <code>sudo</code>. 

<li>
If you are using <code>RunAssembly.py</code>, use <code>SetupRunDirectory.py</code>
and not <code>SetupSmallRunDirectory.py</code>
to prepare the run directory.
The former, however, requires root privilege to be acquired via <code>sudo</code>. 

</ul>
</main>
</body>
</html>

